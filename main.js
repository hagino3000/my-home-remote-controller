var IRKIT_API = 'http://192.168.10.4/messages';


var DATA_TV_ONOFF = {"format":"raw","freq":38,"data":[640,4107,640,4107,640,4107,640,1738,640,1738,640,1738,640,4107,640,1738,640,1738,640,4107,640,1738,640,1738,640,1738,640,1738,640,1738,640,1738,640,52381,640,4107,640,4107,640,4107,640,1738,640,1738,640,1738,640,4107,640,1738,640,1738,640,4107,640,1738,640,1738,640,1738,640,1738,640,1738,640,1738,640]}

var DATA_TV_CHIDEJI = {"format":"raw","freq":38,"data":[5408,4107,640,4107,640,1738,640,1738,640,1738,640,4107,686,1679,640,4107,686,1679,640,4107,640,4107,640,1738,640,4107,640,4107,640,4107,640,41171,686,4107,640,4107,640,4107,640,1679,640,1679,640,1679,640,4107,640,1738,686,4107,640,1738,640,4107,686,4107,686,1738,686,4107,640,4107,640,4107,640,41171,640,4107,686,4107,686,4107,686,1738,640,1738,640,1738,640,4107,640,1738,686,4107,640,1738,640,4107,640,4107,640,1738,640,4107,640,4107,640,4107,640,41171,640,4107,640,4107,640,4107,640,1738,640,1738,640,1738,640,4107,640,1738,640,4107,640,1738,640,4107,640,4107,640,1738,640,4107,686,4107,686,4107,686,41171,640,4107,686,4107,686,4107,686,1738,640,1738,640,1738,640,4107,640,1738,640,4107,640,1738,686,4107,640,4107,640,1738,640,4107,640,4107,640,4107,640]}

var DATA_AUDIO_TV = {"format":"raw","freq":38,"data":[4713,1111,1232,1111,2451,1111,1232,1111,2451,1111,1232,1111,2451,1111,2451,1111,1232,1111,1232,1111,1232,1111,1232,1111,2451,1111,2451,1111,1232,1111,1232,41171,4713,1111,1232,1111,2451,1111,1232,1111,2451,1111,1232,1111,2451,1111,2451,1111,1232,1111,1232,1111,1232,1111,1232,1111,2451,1111,2451,1111,1232,1111,1232,41171,4713,1111,1232,1111,2451,1111,1232,1111,2451,1111,1232,1111,2451,1111,2451,1111,1232,1111,1232,1111,1232,1111,1232,1111,2451,1111,2451,1111,1232,1111,1232,41171,4713,1111,1232,1111,2451,1111,1232,1111,2451,1111,1232,1111,2451,1111,2451,1111,1232,1111,1232,1111,1232,1111,1232,1111,2451,1111,2451,1111,1232,1111,1232]}

var DATA_TV_HDMI = {"format":"raw","freq":38,"data":[640,4107,640,4107,640,4107,640,1738,640,1738,640,1738,640,4107,640,1738,640,1738,640,4107,640,1738,640,4107,640,1738,640,4107,640,1738,640,4107,640,45647,640,4107,640,4107,640,4107,640,1738,640,1738,640,1738,640,4107,640,1738,640,1738,640,4107,640,1738,640,4107,640,1738,640,4107,640,1738,640,4107,640,45647,640,4107,640,4107,640,4107,640,1738,640,1738,640,1738,640,4107,640,1738,640,1738,640,4107,640,1738,640,4107,640,1738,640,4107,640,1738,640,4107,640]}

var DATA_AUDIO_HDMI = {"format":"raw","freq":38,"data":[4713,1111,1232,1111,2451,1111,2451,1111,1232,1111,2451,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,2451,1111,1232,1111,1232,1111,1232,1111,2451,1111,1232,1111,2451,1111,1232,1111,1232,29187,4713,1111,1232,1111,2451,1111,2451,1111,1232,1111,2451,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,2451,1111,1232,1111,1232,1111,1232,1111,2451,1111,1232,1111,2451,1111,1232,1111,1232,29187,4713,1111,1232,1111,2451,1111,2451,1111,1232,1111,2451,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,2451,1111,1232,1111,1232,1111,1232,1111,2451,1111,1232,1111,2451,1111,1232,1111,1232,29187,4713,1111,1232,1111,2451,1111,2451,1111,1232,1111,2451,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,2451,1111,1232,1111,1232,1111,1232,1111,2451,1111,1232,1111,2451,1111,1232,1111,1232]}

var DATA_AUDIO_VOLUME_UP = {"format":"raw","freq":38,"data":[4713,1111,1232,1111,2368,1111,1232,1111,1232,1111,2368,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,2368,1111,2368,1111,1232,1111,1232,44103,4713,1111,1275,1111,2368,1111,1232,1111,1232,1111,2368,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,2368,1111,2368,1111,1232,1111,1232,44103,4713,1111,1232,1111,2368,1111,1232,1111,1232,1111,2368,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,2368,1111,2368,1111,1232,1111,1232]}

var DATA_AUDIO_VOLUME_DOWN = {"format":"raw","freq":38,"data":[4713,1111,2451,1111,2451,1111,1232,1111,1232,1111,2451,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,2451,1111,2451,1111,1232,1111,1232,42612,4713,1111,2451,1111,2451,1111,1232,1111,1232,1111,2451,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,2451,1111,2451,1111,1232,1111,1232,42612,4713,1111,2451,1111,2451,1111,1232,1111,1232,1111,2451,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,1232,1111,2451,1111,2451,1111,1232,1111,1232]}

$(function() {
    $('#tvonoff').click(function() {
        $.ajax({
            url: IRKIT_API,
            type: 'POST',
            data: JSON.stringify(DATA_TV_ONOFF)
        }).done(function() {
        }).fail(function(e) {
            alert(e);
        });
    });

    $('#watchtv').click(function() {
        $.ajax({
            url: IRKIT_API,
            type: 'POST',
            data: JSON.stringify(DATA_TV_CHIDEJI)
        }).done(function() {
            setTimeout(function() {
                var ret = $.ajax({
                    url: IRKIT_API,
                    type: 'POST',
                    data: JSON.stringify(DATA_AUDIO_TV)
                })
                ret.done(function() {
                    alert('OK');
                });

                ret.fail(function(e) {
                    alert(e);
                });
            }, 2000);
        }).fail(function(e) {
            alert(e);
        });
    });

    $('#watchhdmi').click(function() {
        $.ajax({
            url: IRKIT_API,
            type: 'POST',
            data: JSON.stringify(DATA_TV_HDMI)
        }).done(function() {
            setTimeout(function() {
                console.log('Start post audio htmi');
                var ret = $.ajax({
                    url: IRKIT_API,
                    type: 'POST',
                    data: JSON.stringify(DATA_AUDIO_HDMI)
                })
                ret.done(function() {
                    console.log('success post audio hdmi');
                    alert('OK');
                });

                ret.fail(function(e) {
                    alert(e);
                });
            }, 2000);
        }).fail(function(e) {
            alert(e);
        });
    });

    $('#volumeup').click(function() {
        var req = $.ajax({
            url: IRKIT_API,
            type: 'POST',
            data: JSON.stringify(DATA_AUDIO_VOLUME_UP)
        }).done(function() {
        }).fail(function(e) {
            console.log(e);
            alert(e);
        });
    });

    $('#volumedown').click(function() {
        var req = $.ajax({
            url: IRKIT_API,
            type: 'POST',
            data: JSON.stringify(DATA_AUDIO_VOLUME_DOWN)
        }).done(function() {
        }).fail(function(e) {
            console.log(e);
            alert(e);
        });
    });

    setInterval(function() {
        var req = $.ajax({
            url: IRKIT_API,
            type: 'GET'
        }).done(function() {
            $('#errormsg').hide(300);
            $('#msg').show(300);
        }).fail(function(e) {
            $('#errormsg').show(300);
            $('#msg').hide(300);
        });
    }, 10000);

    var req = $.ajax({
        url: IRKIT_API,
        type: 'GET'
    }).done(function() {
        $('#msg').show(300);
    }).fail(function(e) {
        $('#errormsg').show(300);
    });
});

